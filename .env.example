# ICDA Prototype - Environment Configuration
# Copy this to .env and fill in your values
#
# LITE MODE: Leave AWS blank to run without AI features
# FULL MODE: Add AWS creds for Bedrock Nova AI

# ================================================
# AWS Configuration (OPTIONAL - for AI features)
# ================================================
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=

# Bedrock Model (only used if AWS configured)
NOVA_MODEL=us.amazon.nova-micro-v1:0

# ================================================
# Redis Cache (REQUIRED)
# ================================================
# ICDA requires Redis for caching and session management
# Start with: docker-compose up -d redis
REDIS_URL=redis://localhost:6379

# ================================================
# OpenSearch Vector Store (REQUIRED)
# ================================================
# ICDA requires OpenSearch for vector search and RAG
# Start with: docker-compose up -d opensearch
OPENSEARCH_HOST=localhost:9200
OPENSEARCH_INDEX=customers

# ================================================
# Index Hierarchy (NEW)
# ================================================
INDEX_MASTER=icda-master
INDEX_CODE=icda-code
INDEX_KNOWLEDGE=icda-knowledge
INDEX_CUSTOMERS=icda-customers

# ================================================
# Gemini Enforcer (OPTIONAL)
# ================================================
# AI-powered quality enforcement for RAG chunks
# Get API key from https://makersuite.google.com/app/apikey
GEMINI_API_KEY=
GEMINI_MODEL=gemini-2.0-flash
GEMINI_CHUNK_THRESHOLD=0.6
GEMINI_QUERY_SAMPLE_RATE=0.1
GEMINI_VALIDATION_INTERVAL=6

# ================================================
# Email Authentication (OPTIONAL)
# ================================================
# Simple email-based authentication using Redis sessions
AUTH_ENABLED=false
# Session TTL in seconds (default 24 hours)
AUTH_SESSION_TTL=86400
# Restrict to specific email domains (comma-separated, empty = allow all)
# Example: AUTH_ALLOWED_DOMAINS=company.com,partner.org
AUTH_ALLOWED_DOMAINS=
# Allow anonymous access even when auth is enabled
AUTH_ALLOW_ANONYMOUS=true

# ================================================
# Databricks SQL (OPTIONAL - for Delta table access)
# ================================================
# Direct access to Databricks Delta tables instead of local JSON
# Get credentials from Databricks workspace > SQL Warehouses > Connection Details
DATABRICKS_SERVER_HOSTNAME=
DATABRICKS_HTTP_PATH=
DATABRICKS_TOKEN=
DATABRICKS_CATALOG=main
DATABRICKS_SCHEMA=default
DATABRICKS_CUSTOMERS_TABLE=customers

# ================================================
# Feature Flags
# ================================================
ENABLE_FEDERATION=true
ENABLE_GEMINI_ENFORCER=true
ADMIN_ENABLED=true
# Set to true to use Databricks instead of local JSON
USE_DATABRICKS=false
